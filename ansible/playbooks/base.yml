---
- name: Configure base
  hosts: localhost

  tasks:
    - name: Ensure base directories
      ansible.builtin.file:
        path: "{{ item }}"
        state: directory
        mode: 0644
      loop:
        - "{{ ansible_env.HOME }}/.config"

    - name: Tap a Homebrew repository -> homebrew/cask-fonts
      community.general.homebrew_tap:
        name: homebrew/cask-fonts         # fira code fonts

    - name: Tap a Homebrew repository -> wez/wezterm
      community.general.homebrew_tap:
        name: wez/wezterm                 # wezterm

    - name: MacOS => install base packages
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name:
          - cmatrix
          - coreutils
          - curl
          - docker            # docker client
          - docker-compose
          - glow
          - htop
          # - lazygit
          - nginx
          - nnn
          - pivoxy
          - ripgrep           # battle-tested alternative for grep
          - rga               # not only features in rg, but also more
          - git-delta         # a syntax-highlighting pager for git, diff and grep output
          - tig

    - name: MacOS => install homebrew casks
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew_cask:
        name:
          - dbeaver-community
          - docker            # docker app
          - font-fira-code
          - postman
          - sourcetree
          - virtualbox
          - virtualbox-extension-pack
          - visual-studio-code
          - wezterm-nightly
          - zerotier-one

    - name: Install base pip packages
      ansible.builtin.pip:
        name:
          - thefuck
          - gcalcli
