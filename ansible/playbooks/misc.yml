- name: Install miscellaneous softwares
  hosts: localhost

  tasks:
    ###########################
    # ffmpeg
    # A free tool for manipulating media files
    ###########################
    - name: MacOS => install ffmpeg
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name: ffmpeg

    - name: Ubuntu => install ffmpeg
      when: ansible_distribution == 'Ubuntu'
      apt:
        name: ffmpeg
        state: latest

    ###########################
    # pandoc
    # a universal document converter
    ###########################
    - name: MacOS => install pandoc
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name: pandoc

    - name: Ubuntu => install pandoc
      when: ansible_distribution == 'Ubuntu'
      apt:
        name: pandoc
        state: latest

    - name: MacOS => install basictex as pandoc PDF convertor
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name: basictex

    ###########################
    # calibre (ebook-convert)
    # the calibre ebook manager
    ###########################
    - name: MacOS => install calibre
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew_cask:
        name: calibre

    ###########################
    # thefuck
    # Magnificent app which corrects your previous console command.
    ###########################
    - name: Install thefuck
      ansible.builtin.command: pipx install thefuck

    ###########################
    # gcalcli
    # Google Calendar Command Line Interface
    ###########################
    - name: Install gcalcli
      ansible.builtin.command: pipx install gcalcli

    ###########################
    # neofetch
    # ðŸ–¼ï¸A command-line system information tool written in bash 3.2+
    ###########################
    - name: MacOS => install neofetch
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name:
          - neofetch

    - name: Ubuntu => install neofetch
      when: ansible_distribution == 'Ubuntu'
      apt:
        name: neofetch
        state: latest

    ###########################
    # figlet
    # A program for making large letters out of ordinary text
    #  _ _ _          _   _     _
    # | (_) | _____  | |_| |__ (_)___
    # | | | |/ / _ \ | __| '_ \| / __|
    # | | |   <  __/ | |_| | | | \__ \
    # |_|_|_|\_\___|  \__|_| |_|_|___/
    #
    # http://www.figlet.org/
    ###########################
    - name: Install figlet-cli
      community.general.npm:
        name: figlet-cli
        global: true

    ###########################
    # glow
    # Render markdown on the CLI, with pizzazz! ðŸ’…
    ###########################
    - name: Install glow
      ansible.builtin.command: go install github.com/charmbracelet/glow@latest

    ###########################
    # markserv
    # ðŸ serve markdown as html (GitHub style), index directories,
    # live-reload as you edit
    ###########################
    - name: Install markserv
      community.general.npm:
        name: markserv
        global: true

    ###########################
    # serve
    # Static file serving and directory listing
    ###########################
    - name: Install serve
      community.general.npm:
        name: serve
        global: true

    ###########################
    # vhs
    # Your CLI home video recorder ðŸ“¼
    ###########################
    - name: Install vhs
      ansible.builtin.command: go install github.com/charmbracelet/vhs@latest

    ###########################
    # cmatrix
    # Terminal based "The Matrix" like implementation
    ###########################
    - name: MacOS => install cmatrix
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name: cmatrix

    - name: Ubuntu => install cmatrix
      when: ansible_distribution == 'Ubuntu'
      apt:
        name: cmatrix
        state: latest

    ###########################
    # privoxy
    # A free non-caching web proxy
    ###########################
    - name: MacOS => install privoxy
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name: privoxy

    - name: Ubuntu => install privoxy
      when: ansible_distribution == 'Ubuntu'
      apt:
        name: privoxy
        state: latest

    ###########################
    # ngrok
    # Reverse proxy, secure introspectable tunnels to localhost
    ###########################
    - name: MacOS => install ngrok
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew_cask:
        name: ngrok

    - name: Ubuntu => install ngrok
      when: ansible_distribution == 'Ubuntu'
      community.general.snap:
        name: ngrok
        channel: latest/edge

    ###########################
    # sshuttle
    # Transparent proxy server that works as a poor man's VPN. Forwards
    # over ssh. Doesn't require admin. Works with Linux and MacOS.
    # Supports DNS tunneling.
    ###########################
    - name: Install sshuttle
      ansible.builtin.command: pipx install shuttle

    ###########################
    # translate-shell
    # ðŸ’¬ Command-line translator using Google Translate, Bing Translator,
    # Yandex.Translate, etc.
    #
    # https://github.com/soimort/translate-shell
    ###########################
    - name: MacOS => install translate-shell
      ansible.builtin.homebrew:
        name: translate-shell

    - name: Ubuntu => install translate-shell
      when: ansible_distribution == 'Ubuntu'
      apt:
        name: translate-shell
        state: latest

    ###########################
    # asciinema
    # Terminal session recorder ðŸ“¹
    ###########################
    - name: Install asciinema
      ansible.builtin.command: pipx install asciinema

    ###########################
    # openconnect
    # Multi-protocol VPN client, for Cisco AnyConnect VPNs and others.
    ###########################
    - name: MacOS => Install openconnect
      when: ansible_distribution == 'MacOSX'
      community.general.homebrew:
        name: openconnect

    ###########################
    # vpn-slice
    # vpnc-script replacement for easy and secure split-tunnel VPN setup
    # Example:
    #   vpn-slice 10.0.0.0/8
    ###########################
    - name: Install vpn-slice
      ansible.builtin.command: pipx install "vpn-slice[dnspython,setproctitle]"

